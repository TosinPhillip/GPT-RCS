{% extends 'base.html' %}
{% block content %}
<section class="max-w-md mx-auto p-6 bg-white rounded-xl shadow-lg">
    <h1 class="text-3xl font-bold mb-6 text-center text-indigo-700">Access Your Results</h1>
    <form id="searchForm" method="POST" class="space-y-4">
        <input type="text" name="admission_number" placeholder="Admission Number (e.g. GPT/001)" required 
               class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-indigo-500 transition">
        <input type="password" name="password" placeholder="Password" required 
               class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-indigo-500 transition">
        <button type="submit" class="w-full py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition">
            Login
        </button>
    </form>
    <div id="results" class="mt-6 text-red-600"></div>
</section>

<script>
document.getElementById('searchForm').addEventListener('submit', async (e) => {
    e.preventDefault();
    const formData = new FormData(e.target);
    const res = await fetch('/', { method: 'POST', body: formData });
    const data = await res.json();
    if (data.error) {
        document.getElementById('results').textContent = data.error;
    } else {
        window.location.href = '{{ url_for("student.dashboard") }}';
    }
});
</script>
{% endblock %}